{"pageProps":{"frontmatter":{"slug":"/blog/getxml","date":"Tue, 08 Nov 2005 09:47:00 GMT","title":"GetXMLプラグインの文字化け解消","epoch":"1131443220"},"markdownBody":"\nRSSをサイドに表示できるプラグインはないもんかと思ってたら、[GetXML](http://www.staggernation.com/mtplugins/GetXML/)ってのを見つけた。RSSに限らずXMLを表示できるってので早速導入。Last.fmのXMLを表示するようにテンプレートを書いてrebuildすると、どういうわけだかGetXMLプラグインが表示する部分は日本語が出てるのに、他の部分（本文など）の日本語は全部文字化けした。何じゃこりゃ？\n\nと、化けた文字を見てるうちに思い出したのが[AWSで文字化けしたこのときの記憶](http://blog.bulknews.net/mt/archives/001773.html)。これですよたぶんそうですよ。で、「Perl の Unicode フラグ」って何さってググったらずばり「[Perl 5.8.x Unicode関連](http://web.archive.org/web/20060212151726/http://www.pure.ne.jp/~learner/program/Perl_unicode.html)」ってページ発見。ふむふむ。\n\n1. 今までUTF-8の日本語が問題なく表示されていた。\n1. GetXMLで何かが悪いに違いない。\n1. GetXMLは特に文字をいじってないからXML::Simpleが悪いに違いない。\n1. UTF-8フラグってやつは悪いヤツらしい。\n1. XML::Simpleを通ると、文字列にフラグが付いてしまうのかもね。\n1. じゃあ返された文字列のフラグを外してしまえばいいのでは。\n1. 外すには『utf8::encode($alpha); # UTF8フラグを落す(Encode::encode_utf8 と同じだが、引数を変化させる)』って書いてあるぞ。\n1. GetXMLのget_valueにパッチ当てちゃえ。\n    ```\n    203a204\n    > utf8::encode($text);\n    ```\n1. Save and Rebuild。\n1. おー日本語出た。\n\n勘でも何とかなるもんですね。＜オチなしｗ","navs":{"nextPage":{"epoch":"1135782000","title":"Atom API Photo UploaderのLivedoor Pics対応","slug":"/blog/atom_api_photo_uploaderlivedoo"},"prevPage":{"epoch":"1131443220","title":"GetXMLプラグインの文字化け解消","slug":"/blog/getxml"}}},"__N_SSG":true}