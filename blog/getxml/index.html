<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-50700-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {dataLayer.push(arguments); }
    gtag("js", new Date());

    gtag("config", "UA-50700-3");
 </script><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&amp;display=swap" rel="stylesheet"/><link rel="alternate" type="application/atom+xml" title="Atom feed for blog by Fumiaki Yoshimatsu" href="https://luckypines.com/feed.atom"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>GetXMLプラグインの文字化け解消</title><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@fumiakiy"/><meta name="og:title" content="GetXMLプラグインの文字化け解消"/><meta name="twitter:title" content="GetXMLプラグインの文字化け解消"/><link rel="prev" href="https://luckypines.com/blog/standalonexml"/><link rel="next" href="https://luckypines.com/blog/atom_api_photo_uploaderlivedoo"/><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/64b34ea9b2889faf28d8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/64b34ea9b2889faf28d8.css" data-n-g=""/><link rel="preload" href="/_next/static/css/9b0bc77bc3188cb01e3f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9b0bc77bc3188cb01e3f.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-591f24fdf217128ccce8.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.0c239260661ae1d12aa2.js" as="script"/><link rel="preload" href="/_next/static/chunks/c332eec026863555a27dac51ec167aa1a0b2daea.b0d8b3a553c082c94749.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-bcebaf8643a439c67406.js" as="script"/><link rel="preload" href="/_next/static/chunks/447cfa7d44c888c772d6119f6f6093046de0bb36.df9ec102d8f274c4414d.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bpostname%5D-6b0db52313629d37408b.js" as="script"/></head><body><div id="__next"><div class="blog"><article class="BlogPost_article__3W1r-"><h1>GetXMLプラグインの文字化け解消</h1><div>11/8/2005, 4:47:00 AM</div><div class="BlogPost_body__1oPZH"><div>RSSをサイドに表示できるプラグインはないもんかと思ってたら、<a href="http://www.staggernation.com/mtplugins/GetXML/">GetXML</a>ってのを見つけた。RSSに限らずXMLを表示できるってので早速導入。Last.fmのXMLを表示するようにテンプレートを書いてrebuildすると、どういうわけだかGetXMLプラグインが表示する部分は日本語が出てるのに、他の部分（本文など）の日本語は全部文字化けした。何じゃこりゃ？</div><div>と、化けた文字を見てるうちに思い出したのが<a href="http://blog.bulknews.net/mt/archives/001773.html">AWSで文字化けしたこのときの記憶</a>。これですよたぶんそうですよ。で、「Perl の Unicode フラグ」って何さってググったらずばり「<a href="http://web.archive.org/web/20060212151726/http://www.pure.ne.jp/~learner/program/Perl_unicode.html">Perl 5.8.x Unicode関連</a>」ってページ発見。ふむふむ。</div><ol><li>今までUTF-8の日本語が問題なく表示されていた。</li><li>GetXMLで何かが悪いに違いない。</li><li>GetXMLは特に文字をいじってないからXML::Simpleが悪いに違いない。</li><li>UTF-8フラグってやつは悪いヤツらしい。</li><li>XML::Simpleを通ると、文字列にフラグが付いてしまうのかもね。</li><li>じゃあ返された文字列のフラグを外してしまえばいいのでは。</li><li>外すには『utf8::encode($alpha); # UTF8フラグを落す(Encode::encode_utf8 と同じだが、引数を変化させる)』って書いてあるぞ。</li><li>GetXMLのget_valueにパッチ当てちゃえ。<pre><code>203a204
&gt; utf8::encode($text);</code></pre></li><li>Save and Rebuild。</li><li>おー日本語出た。</li></ol><div>勘でも何とかなるもんですね。＜オチなしｗ</div></div></article></div><footer class="BlogPost_footer__YgPcw"><a class="BlogPost_prev__2S7U6" href="/blog/standalonexml/">« <!-- -->standalone要素、またはXMLもいいけど仕様もね</a><a href="/blog/">Blog</a><a class="BlogPost_next__1yyYz" href="/blog/atom_api_photo_uploaderlivedoo/">Atom API Photo UploaderのLivedoor Pics対応<!-- --> » </a></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"slug":"/blog/getxml","date":"Tue, 08 Nov 2005 09:47:00 GMT","title":"GetXMLプラグインの文字化け解消","epoch":"1131443220"},"markdownBody":"\nRSSをサイドに表示できるプラグインはないもんかと思ってたら、[GetXML](http://www.staggernation.com/mtplugins/GetXML/)ってのを見つけた。RSSに限らずXMLを表示できるってので早速導入。Last.fmのXMLを表示するようにテンプレートを書いてrebuildすると、どういうわけだかGetXMLプラグインが表示する部分は日本語が出てるのに、他の部分（本文など）の日本語は全部文字化けした。何じゃこりゃ？\n\nと、化けた文字を見てるうちに思い出したのが[AWSで文字化けしたこのときの記憶](http://blog.bulknews.net/mt/archives/001773.html)。これですよたぶんそうですよ。で、「Perl の Unicode フラグ」って何さってググったらずばり「[Perl 5.8.x Unicode関連](http://web.archive.org/web/20060212151726/http://www.pure.ne.jp/~learner/program/Perl_unicode.html)」ってページ発見。ふむふむ。\n\n1. 今までUTF-8の日本語が問題なく表示されていた。\n1. GetXMLで何かが悪いに違いない。\n1. GetXMLは特に文字をいじってないからXML::Simpleが悪いに違いない。\n1. UTF-8フラグってやつは悪いヤツらしい。\n1. XML::Simpleを通ると、文字列にフラグが付いてしまうのかもね。\n1. じゃあ返された文字列のフラグを外してしまえばいいのでは。\n1. 外すには『utf8::encode($alpha); # UTF8フラグを落す(Encode::encode_utf8 と同じだが、引数を変化させる)』って書いてあるぞ。\n1. GetXMLのget_valueにパッチ当てちゃえ。\n    ```\n    203a204\n    \u003e utf8::encode($text);\n    ```\n1. Save and Rebuild。\n1. おー日本語出た。\n\n勘でも何とかなるもんですね。＜オチなしｗ","navs":{"nextPage":{"epoch":"1135782000","title":"Atom API Photo UploaderのLivedoor Pics対応","slug":"/blog/atom_api_photo_uploaderlivedoo"},"prevPage":{"epoch":"1111974600","title":"standalone要素、またはXMLもいいけど仕様もね","slug":"/blog/standalonexml"}}},"__N_SSG":true},"page":"/blog/[postname]","query":{"postname":"getxml"},"buildId":"ncHs5kG0iheRP5qhiPI3D","runtimeConfig":{},"nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-af28de04c604a2479390.js"></script><script src="/_next/static/chunks/main-591f24fdf217128ccce8.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.0c239260661ae1d12aa2.js" async=""></script><script src="/_next/static/chunks/c332eec026863555a27dac51ec167aa1a0b2daea.b0d8b3a553c082c94749.js" async=""></script><script src="/_next/static/chunks/pages/_app-bcebaf8643a439c67406.js" async=""></script><script src="/_next/static/chunks/447cfa7d44c888c772d6119f6f6093046de0bb36.df9ec102d8f274c4414d.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bpostname%5D-6b0db52313629d37408b.js" async=""></script><script src="/_next/static/ncHs5kG0iheRP5qhiPI3D/_buildManifest.js" async=""></script><script src="/_next/static/ncHs5kG0iheRP5qhiPI3D/_ssgManifest.js" async=""></script></body></html>