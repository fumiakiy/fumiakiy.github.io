<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-50700-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {dataLayer.push(arguments); }
    gtag("js", new Date());

    gtag("config", "UA-50700-3");
 </script><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&amp;display=swap"/><link rel="alternate" type="application/atom+xml" title="Atom feed for blog by Fumiaki Yoshimatsu" href="https://luckypines.com/feed.atom"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>GetXMLプラグインの文字化け解消</title><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@fumiakiy"/><meta name="og:title" content="GetXMLプラグインの文字化け解消"/><meta name="twitter:title" content="GetXMLプラグインの文字化け解消"/><link rel="prev" href="https://luckypines.com/blog/standalonexml"/><link rel="next" href="https://luckypines.com/blog/atom_api_photo_uploaderlivedoo"/><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/3b6be55726842366e41a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3b6be55726842366e41a.css" data-n-g=""/><link rel="preload" href="/_next/static/css/5e9ab08e6ebffc187b3e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5e9ab08e6ebffc187b3e.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.f8bd46fc02868c500bda.js" as="script"/><link rel="preload" href="/_next/static/chunks/c332eec026863555a27dac51ec167aa1a0b2daea.4e5a644302764f812696.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-2e3708d25e5a123ad9dd.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-84337a9489eb28853128.js" as="script"/><link rel="preload" href="/_next/static/chunks/447cfa7d44c888c772d6119f6f6093046de0bb36.43ec87548acad1fb7004.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bpostname%5D-8557d31cb12e9c45d75d.js" as="script"/><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap">@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_7PqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_Of2PQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSV0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSx0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSt0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSd0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSZ0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSh0me8iUI0.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSV0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSx0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSt0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSd0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSZ0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSh0me8iUI0.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSV0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSx0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSt0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSd0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSZ0me8iUI0lkQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSh0me8iUI0.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="blog"><article class="BlogPost_article__3W1r-"><h1>GetXMLプラグインの文字化け解消</h1><div>11/8/2005, 4:47:00 AM</div><div class="BlogPost_body__1oPZH"><div>RSSをサイドに表示できるプラグインはないもんかと思ってたら、<a href="http://www.staggernation.com/mtplugins/GetXML/">GetXML</a>ってのを見つけた。RSSに限らずXMLを表示できるってので早速導入。Last.fmのXMLを表示するようにテンプレートを書いてrebuildすると、どういうわけだかGetXMLプラグインが表示する部分は日本語が出てるのに、他の部分（本文など）の日本語は全部文字化けした。何じゃこりゃ？</div><div>と、化けた文字を見てるうちに思い出したのが<a href="http://blog.bulknews.net/mt/archives/001773.html">AWSで文字化けしたこのときの記憶</a>。これですよたぶんそうですよ。で、「Perl の Unicode フラグ」って何さってググったらずばり「<a href="http://web.archive.org/web/20060212151726/http://www.pure.ne.jp/~learner/program/Perl_unicode.html">Perl 5.8.x Unicode関連</a>」ってページ発見。ふむふむ。</div><ol><li>今までUTF-8の日本語が問題なく表示されていた。</li><li>GetXMLで何かが悪いに違いない。</li><li>GetXMLは特に文字をいじってないからXML::Simpleが悪いに違いない。</li><li>UTF-8フラグってやつは悪いヤツらしい。</li><li>XML::Simpleを通ると、文字列にフラグが付いてしまうのかもね。</li><li>じゃあ返された文字列のフラグを外してしまえばいいのでは。</li><li>外すには『utf8::encode($alpha); # UTF8フラグを落す(Encode::encode_utf8 と同じだが、引数を変化させる)』って書いてあるぞ。</li><li>GetXMLのget_valueにパッチ当てちゃえ。<pre><code>203a204
&gt; utf8::encode($text);</code></pre></li><li>Save and Rebuild。</li><li>おー日本語出た。</li></ol><div>勘でも何とかなるもんですね。＜オチなしｗ</div></div></article></div><footer class="BlogPost_footer__YgPcw"><a class="BlogPost_prev__2S7U6" href="/blog/standalonexml/">« <!-- -->standalone要素、またはXMLもいいけど仕様もね</a><a href="/blog/">Blog</a><a class="BlogPost_next__1yyYz" href="/blog/atom_api_photo_uploaderlivedoo/">Atom API Photo UploaderのLivedoor Pics対応<!-- --> » </a></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"slug":"/blog/getxml","date":"Tue, 08 Nov 2005 09:47:00 GMT","title":"GetXMLプラグインの文字化け解消","epoch":"1131443220"},"markdownBody":"\nRSSをサイドに表示できるプラグインはないもんかと思ってたら、[GetXML](http://www.staggernation.com/mtplugins/GetXML/)ってのを見つけた。RSSに限らずXMLを表示できるってので早速導入。Last.fmのXMLを表示するようにテンプレートを書いてrebuildすると、どういうわけだかGetXMLプラグインが表示する部分は日本語が出てるのに、他の部分（本文など）の日本語は全部文字化けした。何じゃこりゃ？\n\nと、化けた文字を見てるうちに思い出したのが[AWSで文字化けしたこのときの記憶](http://blog.bulknews.net/mt/archives/001773.html)。これですよたぶんそうですよ。で、「Perl の Unicode フラグ」って何さってググったらずばり「[Perl 5.8.x Unicode関連](http://web.archive.org/web/20060212151726/http://www.pure.ne.jp/~learner/program/Perl_unicode.html)」ってページ発見。ふむふむ。\n\n1. 今までUTF-8の日本語が問題なく表示されていた。\n1. GetXMLで何かが悪いに違いない。\n1. GetXMLは特に文字をいじってないからXML::Simpleが悪いに違いない。\n1. UTF-8フラグってやつは悪いヤツらしい。\n1. XML::Simpleを通ると、文字列にフラグが付いてしまうのかもね。\n1. じゃあ返された文字列のフラグを外してしまえばいいのでは。\n1. 外すには『utf8::encode($alpha); # UTF8フラグを落す(Encode::encode_utf8 と同じだが、引数を変化させる)』って書いてあるぞ。\n1. GetXMLのget_valueにパッチ当てちゃえ。\n    ```\n    203a204\n    \u003e utf8::encode($text);\n    ```\n1. Save and Rebuild。\n1. おー日本語出た。\n\n勘でも何とかなるもんですね。＜オチなしｗ","navs":{"nextPage":{"epoch":"1135782000","title":"Atom API Photo UploaderのLivedoor Pics対応","slug":"/blog/atom_api_photo_uploaderlivedoo"},"prevPage":{"epoch":"1111974600","title":"standalone要素、またはXMLもいいけど仕様もね","slug":"/blog/standalonexml"}}},"__N_SSG":true},"page":"/blog/[postname]","query":{"postname":"getxml"},"buildId":"s7QZ2LejEMjpN7t-6zB2F","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-af28de04c604a2479390.js"></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.f8bd46fc02868c500bda.js" async=""></script><script src="/_next/static/chunks/c332eec026863555a27dac51ec167aa1a0b2daea.4e5a644302764f812696.js" async=""></script><script src="/_next/static/chunks/main-2e3708d25e5a123ad9dd.js" async=""></script><script src="/_next/static/chunks/pages/_app-84337a9489eb28853128.js" async=""></script><script src="/_next/static/chunks/447cfa7d44c888c772d6119f6f6093046de0bb36.43ec87548acad1fb7004.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bpostname%5D-8557d31cb12e9c45d75d.js" async=""></script><script src="/_next/static/s7QZ2LejEMjpN7t-6zB2F/_buildManifest.js" async=""></script><script src="/_next/static/s7QZ2LejEMjpN7t-6zB2F/_ssgManifest.js" async=""></script></body></html>